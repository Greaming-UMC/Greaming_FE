# 기능 명세서 작성 가이드

## 📚 목차
1. 기능 명세서란?
2. 작성 전 준비사항
3. 명세서 구조 (템플릿)
4. 각 섹션 작성 방법
5. 작성 시 주의사항
6. 실제 예시

---

## 1. 기능 명세서란?

### 개념 설명
**기능 명세서(Feature Specification)**는 개발자들이 "어떤 기능을 어떻게 만들어야 하는지"를 정확히 알 수 있도록 작성하는 문서입니다.

### 비유로 이해하기
- **레시피**와 같습니다. 요리사(개발자)가 요리(기능)를 만들 때 필요한 재료(데이터), 순서(로직), 주의사항(예외 처리)을 적어놓은 것입니다.
- **설계도**와 같습니다. 건축가(기획자)가 설계한 내용을 시공사(개발자)가 그대로 구현할 수 있도록 상세히 그려놓은 것입니다.

### 왜 필요한가?
- 개발자들이 혼란 없이 일관된 기능을 만들 수 있습니다.
- 나중에 "이렇게 만들었어야 하는데..." 같은 오해를 방지합니다.
- 새로운 팀원이 빠르게 이해할 수 있습니다.

---

## 2. 작성 전 준비사항

### 체크리스트
- [ ] 해당 기능의 **목적과 배경**이 명확한가?
- [ ] **사용자 시나리오**를 그려볼 수 있는가? (누가, 언제, 무엇을 하는가?)
- [ ] **예외 상황**을 모두 파악했는가? (에러, 중복, 삭제 등)
- [ ] **데이터 구조**를 정의했는가? (어떤 정보가 필요한가?)
- [ ] **우선순위**가 정해져 있는가? (MVP 포함 여부)

---

## 3. 명세서 구조 (템플릿)

```
## [기능명]

### 1. 개요
- 기능 설명
- 목적 및 배경
- 우선순위 (MVP 포함 여부)

### 2. 사용자 시나리오
- 정상 흐름 (Happy Path)
- 예외 흐름 (Error Cases)

### 3. 기능 상세
- 입력 데이터
- 처리 로직
- 출력 데이터
- 화면 구성 (UI/UX)

### 4. 데이터 구조
- 필요한 데이터 필드
- 데이터 타입 및 제약사항

### 5. 예외 처리
- 발생 가능한 오류 상황
- 각 상황별 처리 방법

### 6. API 명세 (백엔드)
- 엔드포인트
- 요청/응답 형식

### 7. 화면 명세 (프론트엔드)
- 화면 레이아웃
- 인터랙션 동작

### 8. 테스트 케이스
- 정상 동작 확인 항목
- 예외 상황 확인 항목
```

---

## 4. 각 섹션 작성 방법

### 4-1. 개요
**목적**: 이 기능이 왜 필요한지, 무엇을 하는지 한눈에 파악

**작성 예시**:
```markdown
### 개요
- **기능명**: 회원가입 / 로그인
- **목적**: 사용자가 서비스에 접근할 수 있는 인증 기능 제공
- **우선순위**: MVP 필수
- **간단 설명**: 이메일/소셜 로그인을 통해 계정을 생성하고 로그인할 수 있습니다.
```

### 4-2. 사용자 시나리오
**목적**: 실제 사용자가 기능을 사용하는 흐름을 단계별로 설명

**작성 예시**:
```markdown
### 사용자 시나리오

#### 정상 흐름
1. 사용자가 "회원가입" 버튼 클릭
2. 이메일/소셜 로그인 선택
3. 정보 입력 및 약관 동의
4. 가입 완료 → 프로필 설정 페이지로 이동

#### 예외 흐름
- 이미 가입된 이메일 → "이미 가입된 계정입니다" 메시지
- 탈퇴한 계정 → "재가입이 제한된 계정입니다" 메시지
- 닉네임 중복 → "이미 사용 중인 닉네임입니다" 메시지
```

### 4-3. 기능 상세
**목적**: 개발자가 구현할 때 필요한 구체적인 로직과 규칙

**작성 예시**:
```markdown
### 기능 상세

#### 입력 데이터
- 이메일 (필수, 이메일 형식 검증)
- 비밀번호 (필수, 8자 이상)
- 닉네임 (필수, 2~12자, 중복 불가)

#### 처리 로직
1. 이메일 중복 확인
2. 비밀번호 암호화 저장
3. 닉네임 중복 확인
4. 사용자 정보 DB 저장
5. JWT 토큰 발급

#### 출력 데이터
- 성공: 사용자 정보 + 토큰
- 실패: 에러 메시지 + 에러 코드
```

### 4-4. 데이터 구조
**목적**: 어떤 데이터가 필요한지, 어떤 형식인지 명확히 정의

**작성 예시**:
```markdown
### 데이터 구조

#### User 테이블
| 필드명 | 타입 | 제약사항 | 설명 |
|--------|------|----------|------|
| id | Long | PK, 자동증가 | 사용자 고유 ID |
| email | String | UNIQUE, NOT NULL | 이메일 주소 |
| password | String | NOT NULL | 암호화된 비밀번호 |
| nickname | String | UNIQUE, 2~12자 | 닉네임 |
| profileImage | String | NULL 가능 | 프로필 이미지 URL |
| createdAt | DateTime | NOT NULL | 가입 일시 |
| deletedAt | DateTime | NULL 가능 | 탈퇴 일시 (소프트 삭제) |
```

### 4-5. 예외 처리
**목적**: 예상치 못한 상황에서 어떻게 처리할지 명시

**작성 예시**:
```markdown
### 예외 처리

| 상황 | 처리 방법 | 사용자에게 보여줄 메시지 |
|------|-----------|------------------------|
| 중복 이메일 | 409 Conflict | "이미 가입된 이메일입니다" |
| 탈퇴한 계정 | 403 Forbidden | "재가입이 제한된 계정입니다" |
| 닉네임 중복 | 409 Conflict | "이미 사용 중인 닉네임입니다" |
| 잘못된 이메일 형식 | 400 Bad Request | "올바른 이메일 형식을 입력해주세요" |
| 비밀번호 길이 부족 | 400 Bad Request | "비밀번호는 8자 이상이어야 합니다" |
```

### 4-6. API 명세 (백엔드)
**목적**: 프론트엔드와 백엔드가 통신하는 방법을 정의

**작성 예시**:
```markdown
### API 명세

#### POST /api/auth/signup
**요청**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "nickname": "그림쟁이"
}
```

**응답 (성공)**
```json
{
  "code": 200,
  "message": "회원가입 성공",
  "data": {
    "userId": 1,
    "email": "user@example.com",
    "nickname": "그림쟁이",
    "token": "eyJhbGciOiJIUzI1NiIs..."
  }
}
```

**응답 (실패)**
```json
{
  "code": 409,
  "message": "이미 가입된 이메일입니다",
  "data": null
}
```
```

### 4-7. 화면 명세 (프론트엔드)
**목적**: 사용자가 보는 화면과 인터랙션을 정의

**작성 예시**:
```markdown
### 화면 명세

#### 회원가입 페이지
- **레이아웃**: 중앙 정렬, 카드 형태
- **입력 필드**: 이메일, 비밀번호, 닉네임
- **버튼**: "회원가입" (주요), "소셜 로그인" (보조)
- **인터랙션**:
  - 실시간 유효성 검사 (이메일 형식, 비밀번호 길이)
  - 중복 확인 버튼 클릭 시 닉네임 중복 체크
  - 회원가입 성공 시 프로필 설정 페이지로 이동
```

### 4-8. 테스트 케이스
**목적**: 기능이 제대로 작동하는지 확인할 항목들

**작성 예시**:
```markdown
### 테스트 케이스

#### 정상 동작
- [ ] 정상적인 정보로 회원가입 성공
- [ ] 회원가입 후 자동 로그인
- [ ] 프로필 설정 페이지로 이동

#### 예외 상황
- [ ] 중복 이메일 입력 시 에러 메시지 표시
- [ ] 탈퇴한 계정 재가입 시도 시 차단
- [ ] 닉네임 중복 시 재입력 요청
- [ ] 잘못된 이메일 형식 입력 시 유효성 검사 실패
```

---

## 5. 작성 시 주의사항

### ✅ DO (해야 할 것)
1. **구체적으로 작성**: "좋아요 기능" ❌ → "작품에 좋아요를 누르면 즉시 반영되고, 작가에게 알림이 전송됨" ✅
2. **예외 상황 명시**: 정상 흐름뿐만 아니라 에러 상황도 꼭 적어주세요.
3. **데이터 형식 명확히**: 숫자인지 문자인지, 최대 길이는 얼마인지 명시하세요.
4. **우선순위 표시**: MVP에 포함되는지, 후순위인지 명확히 하세요.
5. **비유와 예시 활용**: 복잡한 개념은 쉬운 비유로 설명하세요.

### ❌ DON'T (하지 말아야 할 것)
1. **모호한 표현**: "적절히 처리한다", "필요시 반영한다" 같은 표현은 피하세요.
2. **기술 용어 남발**: 개발자가 아닌 사람도 이해할 수 있도록 풀어서 설명하세요.
3. **중요 정보 누락**: 예외 처리나 제약사항을 빼먹지 마세요.
4. **일관성 없는 형식**: 같은 형식으로 작성하여 읽기 쉽게 만드세요.

---

## 6. 실제 예시 (회원가입 기능)

```markdown
## 1-1. 회원가입 / 로그인

### 개요
- **기능명**: 회원가입 및 로그인
- **목적**: 사용자가 서비스에 접근할 수 있는 인증 기능 제공
- **우선순위**: MVP 필수
- **간단 설명**: 이메일 또는 소셜 로그인(구글)을 통해 계정을 생성하고 로그인할 수 있습니다.

### 사용자 시나리오

#### 정상 흐름
1. 사용자가 "회원가입" 버튼 클릭
2. 이메일/소셜 로그인 선택
3. 정보 입력 (이메일, 비밀번호, 닉네임)
4. 약관 동의 체크
5. "가입하기" 버튼 클릭
6. 가입 완료 → 프로필 설정 페이지로 이동

#### 예외 흐름
- 이미 가입된 이메일 → "이미 가입된 이메일입니다" 메시지 표시
- 탈퇴한 계정 → "재가입이 제한된 계정입니다" 메시지 표시
- 닉네임 중복 → "이미 사용 중인 닉네임입니다" 메시지 표시

### 기능 상세

#### 입력 데이터
| 항목 | 타입 | 제약사항 | 설명 |
|------|------|----------|------|
| email | String | 필수, 이메일 형식 | 사용자 이메일 |
| password | String | 필수, 8자 이상 | 비밀번호 |
| nickname | String | 필수, 2~12자, 중복 불가 | 닉네임 |
| agreeTerms | Boolean | 필수, true | 약관 동의 여부 |

#### 처리 로직
1. 이메일 중복 확인 (DB 조회)
2. 탈퇴한 계정인지 확인 (deletedAt 체크)
3. 비밀번호 암호화 (BCrypt)
4. 닉네임 중복 확인
5. 사용자 정보 DB 저장
6. JWT 토큰 발급
7. 프로필 설정 페이지로 리다이렉트

#### 출력 데이터
- **성공**: 사용자 정보 + JWT 토큰
- **실패**: 에러 메시지 + 에러 코드

### 데이터 구조

#### User 테이블
| 필드명 | 타입 | 제약사항 | 설명 |
|--------|------|----------|------|
| id | Long | PK, 자동증가 | 사용자 고유 ID |
| email | String | UNIQUE, NOT NULL | 이메일 주소 |
| password | String | NOT NULL | 암호화된 비밀번호 |
| nickname | String | UNIQUE, 2~12자 | 닉네임 |
| profileImage | String | NULL 가능, 기본값 제공 | 프로필 이미지 URL |
| createdAt | DateTime | NOT NULL | 가입 일시 |
| deletedAt | DateTime | NULL 가능 | 탈퇴 일시 (소프트 삭제) |

### 예외 처리

| 상황 | HTTP 상태 코드 | 처리 방법 | 사용자 메시지 |
|------|---------------|-----------|-------------|
| 중복 이메일 | 409 Conflict | 회원가입 차단 | "이미 가입된 이메일입니다" |
| 탈퇴한 계정 | 403 Forbidden | 재가입 차단 | "재가입이 제한된 계정입니다" |
| 닉네임 중복 | 409 Conflict | 재입력 요청 | "이미 사용 중인 닉네임입니다" |
| 잘못된 이메일 형식 | 400 Bad Request | 유효성 검사 실패 | "올바른 이메일 형식을 입력해주세요" |
| 비밀번호 길이 부족 | 400 Bad Request | 유효성 검사 실패 | "비밀번호는 8자 이상이어야 합니다" |
| 약관 미동의 | 400 Bad Request | 가입 차단 | "약관에 동의해주세요" |

### API 명세

#### POST /api/auth/signup
**요청**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "nickname": "그림쟁이",
  "agreeTerms": true
}
```

**응답 (성공 - 200 OK)**
```json
{
  "code": 200,
  "message": "회원가입 성공",
  "data": {
    "userId": 1,
    "email": "user@example.com",
    "nickname": "그림쟁이",
    "token": "eyJhbGciOiJIUzI1NiIs..."
  }
}
```

**응답 (실패 - 409 Conflict)**
```json
{
  "code": 409,
  "message": "이미 가입된 이메일입니다",
  "data": null
}
```

### 화면 명세

#### 회원가입 페이지
- **레이아웃**: 중앙 정렬, 카드 형태 (최대 너비 400px)
- **입력 필드**:
  - 이메일 (이메일 형식 자동 검증)
  - 비밀번호 (8자 이상 표시)
  - 닉네임 (중복 확인 버튼 포함)
- **버튼**: 
  - "회원가입" (주요 버튼, 전체 너비)
  - "구글 로그인" (보조 버튼)
- **인터랙션**:
  - 실시간 유효성 검사 (이메일 형식, 비밀번호 길이)
  - 닉네임 중복 확인 버튼 클릭 시 즉시 확인
  - 회원가입 성공 시 프로필 설정 페이지로 이동
  - 에러 발생 시 입력 필드 하단에 빨간색 에러 메시지 표시

### 테스트 케이스

#### 정상 동작
- [ ] 정상적인 정보로 회원가입 성공
- [ ] 회원가입 후 자동 로그인 (토큰 발급)
- [ ] 프로필 설정 페이지로 이동

#### 예외 상황
- [ ] 중복 이메일 입력 시 409 에러 및 메시지 표시
- [ ] 탈퇴한 계정 재가입 시도 시 403 에러 및 차단
- [ ] 닉네임 중복 시 409 에러 및 재입력 요청
- [ ] 잘못된 이메일 형식 입력 시 400 에러 및 유효성 검사 실패
- [ ] 비밀번호 8자 미만 입력 시 400 에러 및 경고 메시지
- [ ] 약관 미동의 시 가입 버튼 비활성화 또는 400 에러
```

---

## 7. 작성 팁

### 📝 체크리스트 활용
각 기능을 작성할 때 아래 체크리스트를 활용하세요:

- [ ] 기능의 목적이 명확한가?
- [ ] 정상 흐름과 예외 흐름을 모두 작성했는가?
- [ ] 필요한 데이터가 모두 정의되었는가?
- [ ] 예외 처리가 구체적으로 명시되었는가?
- [ ] API 명세가 작성되었는가? (백엔드 기능인 경우)
- [ ] 화면 명세가 작성되었는가? (프론트엔드 기능인 경우)
- [ ] 테스트 케이스가 포함되었는가?

### 🎯 우선순위별 작성
1. **MVP 필수 기능**: 가장 상세하게 작성
2. **후순위 기능**: 기본 구조만 작성하고 나중에 보완

### 🔄 지속적 업데이트
기능 명세서는 한 번 작성하고 끝나는 것이 아닙니다. 개발 중 발견된 내용이나 변경사항을 계속 업데이트하세요.

---

## 8. 참고 자료

- [GitHub Issues 템플릿](./.github/ISSUE_TEMPLATE/)
- [프론트엔드 컴포넌트 가이드](./frontend/docs/)
- [백엔드 README](./backend/README.md)
